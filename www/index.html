<!DOCTYPE html> 
<html>
<head>
  <title>Crown Balls</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta name="viewport" content="width=device-width", initial-scale=1.0, user-scalable="no"/>
  <link href="breakout.css" media="screen, print" rel="stylesheet" type="text/css" /> 
</head> 
 
<body> 
<div id="preload">
  <div id="cl1"> </div>
  <div id="cl2"> </div>
  <div id="cl3"> </div>
  <div id="cl4"> </div>
  <div id="cl5"> </div>

  <div id="counter">60</div>
  <div id="refresh">
    <img src="images/refresh.png" /> 
  </div>
  <ul id="switcher">
    <li class="active">60 sec</li>
  </ul>
  <ul id="switcher2">
    <li class="active" id="target_score">10000</li>
  </ul>
  <div id="crown"></div>
  <div id="brick"></div>
  <div id="grow1"></div>
  <div id="grow2"></div>
  <div id="grow3"></div>
  <div id="grow4"></div>
  <div id="grow5"></div>
  <div id="grow6"></div>
  <div id="grow7"></div>
  <div id="grow8"></div>
  <div id="grow9"></div>
  <div id="grow10"></div>
  <div id="grow11"></div>
  <div id="grow12"></div>
  <div id="grow13"></div>
  <div id="grow14"></div>
  <div id="grow15"></div>
  <div id="grow16"></div>
  <div id="grow17"></div>
  <div id="grow18"></div>
  <div id="grow19"></div>
  <div id="grow20"></div>
  <div id="grow21"></div>
  <div id="grow22"></div>
  <div id="grow23"></div>
  <div id="grow24"></div>
  <div id="grow25"></div>
  <div id="grow26"></div>
  <div id="grow27"></div>
  <div id="grow28"></div>
  <div id="grow29"></div>
  <div id="grow30"></div>
  <div id="grow31"></div>
  <div id="grow32"></div>
  <div id="grow33"></div>
  <div id="grow34"></div>
  <div id="grow35"></div>
  <div id="grow36"></div>
  <div id="grow37"></div>
  <div id="grow38"></div>
  <div id="grow39"></div>
  <div id="grow40"></div>
  <div id="grow41"></div>

  <a id="btn_speed" href="#">
    <img src="images/btn_speed.png" /> 
  </a>
  <a id="btn_smoke" href="#">
    <img src="images/btn_smoke.png" /> 
  </a>
  <a id="btn_smell" href="#">
    <img src="images/btn_smell.png" /> 
  </a>
  <div id="gps_ring"></div>

  <div id="breakout">
    <canvas id="canvas">
      <div class='unsupported'>
        Sorry, game cannot be run because the &lt;canvas&gt; element is not supported
      </div>
    </canvas>
    <div id="levels">
      <img id="next" class="disabled" src="images/up.png"   title="next level">
      <img id="prev" class="disabled" src="images/down.png" title="previous level">
      <span id="label">level:</span><span id="level"></span>
    </div>
    
    <div id="controls">
      <input id='sound' type='checkbox' />
      <label for='sound'>sound</label>
    </div>
    
    <div id="instructions" style='display:none;'>
      <div class='keyboard'>
        <!--
        <b>space</b> to start<br>
        <b>left/right</b> to move paddle<br>
        <b>up/down</b> to change level
        -->
      </div>
      <div class='touch'>
        <!--
        Нажми на экран, чтобы начать
        -->
      </div>
    </div>
  </div>

  <div id="start-screen">
    <h1>Crown Ball</h1>
    <div class="clearfix">
      <div class="left">
        <p class="title">Выбивай блоки, получай баллы</p>
        <p>
          <img src="images/brick_normal.png" alt="Normal block" /> от 95 до 115 баллов &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </p>
        <p>
          <img src="images/brick_good.png" alt="Normal block" /> 1350 баллов за «корону»
        </p>
      </div>
      <div class="right">
        <p class="title">Избегай серых блоков</p>
        <p>
          <img src="images/brick_bad.png" alt="Normal block" /> &ndash; одна из ловушек в игре &nbsp;&nbsp;
        </p>        
      </div>
    </div>
    <div class="clearfix">
      <div class="left">
        <p>
          <img class="btn__" width="90px" src="images/btn_speed.png" alt="Button 1"> — верни платформе плотность<br/>
        </p>
        <p>
          <img class="btn__" width="90px" src="images/btn_smoke.png" alt="Button 1"> — избавься от дыма<br/>
        </p>
        <p>
          <img class="btn__" width="90px" src="images/btn_smell.png" alt="Button 1"> — останови уменьшение платформы<br/>
        </p>
      </div>
      <div class="right">
        <p class="title">Количество баллов</p>
        <p class="radio">
          <input type="radio" name="group1" value="5000" onclick=" updateTarget(5000);"> 5000 баллов
        </p>
        <p class="radio">
          <input type="radio" name="group1" value="10000" checked onclick="updateTarget(10000);"> 10 000 баллов
        </p>
        <p class="radio">
          <input type="radio" name="group1" value="15000" onclick="updateTarget(12000);"> 12 000 баллов
        </p>        
      </div>
    </div>
  </div>
  <div id="gameover_1">
    Игра окончена. Попробуй позже. <br/>
    <img src="images/crownL.png" alt="" />
  </div>
  <div id="gameover_2">
    Время истекло. Попробуй позже. <br/>
    <img src="images/crownL.png" alt="" />
  </div>
  <div id="gameover_3">
    У тебя отлично получилось! <br/>
    Ты набрал <span id="total-score">0</span> очков<br/>
    <img src="images/crownL.png" alt="" />
  </div>
  <div id="night">
    <img src="images/night.png" alt="" /> <br/>
    Твоя коронная ночь! 
  </div>
  <script>
  var game,
      interval_,
      crint, 
      result_ = 10000;
  var counter = 60, bricks_count = 0;
  var brickInt, brickCount = 0, ps_ = 0;

  function ballInterval() {
    if (counter > 0) {
      counter--;
      document.getElementById('counter').innerText = counter;
    } else {
      counter = 60;
      game.lose();
      clearInterval(interval_);
    }
  }

  function sleep(milliseconds) {
    var start = new Date().getTime();
    for (var i = 0; i < 1e7; i++) {
      if ((new Date().getTime() - start) > milliseconds){
        break;
      }
    }
  }

  function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  function animateBrick() {
    brickInt = setInterval(function(){
      brickCount++;
      if (brickCount > 0) { $('brick').style.backgroundPosition = "-79px -78px"; $('brick').show(); }
      if (brickCount > 1) { $('brick').style.backgroundPosition = "-210px -78px"; }
      if (brickCount > 2) { $('brick').style.backgroundPosition = "-342px -78px"; }
      if (brickCount > 3) { $('brick').style.backgroundPosition = "-472px -78px"; }
      if (brickCount > 4) { $('brick').style.backgroundPosition = "-603px -78px"; }
      if (brickCount > 5) { $('brick').style.backgroundPosition = "-734px -78px"; }
      if (brickCount > 6) { clearInterval(brickInt); $('brick').hide(); }
    }, 50);
    console.log('animate: ' + (new Date().getTime()));
  }

  function updateTarget(score) {
    window.result_ = score;
    game.cfg.ball.labels['3'] = { text: 'ЦЕЛЬ '+score+' БАЛЛОВ', fill: '#fff', stroke: '#fff', font: 'normal 34pt UnicumCondLight' };
    $('target_score').innerText = score;
  }
  </script>  
  <script src="game.js"></script>
  <script src="breakout.js"></script>
  <script src="levels.js"></script>
  <script>
  Game.ready(function() {
    game = Game.start('canvas', Breakout);
    $('btn_speed').hide();
    $('btn_smoke').hide();
    $('btn_smell').hide();
    $('brick').hide();
    $('gps_ring').hide();
    $('gameover_1').hide();
    $('gameover_2').hide();
    $('gameover_3').hide();
    $('night').hide();
  });
  setTimeout(function() { game.setLevel(5); }, 50);      
  setTimeout(function() { $('preload').style.opacity = 1; }, 1000); 
  </script>
</div>
</body> 
</html>
